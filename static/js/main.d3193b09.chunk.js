(this.webpackJsonpnpx=this.webpackJsonpnpx||[]).push([[0],{90:function(e,t,a){},91:function(e,t,a){"use strict";a.r(t),a.d(t,"history",(function(){return te}));var c=a(1),n=a.n(c),s=a(52),r=a.n(s),i=a(9),o=a(12),l=a(17),u=a(2),j=function(){var e=Object(c.useState)(!1),t=Object(o.a)(e,2),a=t[0],n=t[1];return Object(u.jsxs)("nav",{className:"navbar is-primary",role:"navigation","aria-label":"main navigation",children:[Object(u.jsxs)("div",{className:"navbar-brand",children:[Object(u.jsx)(l.b,{to:"/",className:"navbar-item",children:Object(u.jsx)("h1",{className:"title",children:"Costeapp"})}),Object(u.jsxs)("span",{role:"button",onClick:function(){n(!a)},className:"navbar-burger burger ".concat(a&&"is-active"),"aria-label":"menu","aria-expanded":"false","data-target":"mainNavbar",children:[Object(u.jsx)("span",{"aria-hidden":"true"}),Object(u.jsx)("span",{"aria-hidden":"true"}),Object(u.jsx)("span",{"aria-hidden":"true"})]})]}),Object(u.jsxs)("div",{id:"mainNavbar",className:"navbar-menu ".concat(a&&"is-active"),children:[Object(u.jsxs)("div",{className:"navbar-start",children:[Object(u.jsx)(l.b,{className:"navbar-item",to:"/costos-fijos",children:"Costos fijos"}),Object(u.jsx)(l.b,{className:"navbar-item",to:"/insumos_",children:"Insumos"}),Object(u.jsx)(l.b,{className:"navbar-item",to:"/recetas",children:"Recetas"}),Object(u.jsx)(l.b,{className:"navbar-item",to:"/reporte",children:"Reporte"})]}),Object(u.jsx)("div",{className:"navbar-end",children:Object(u.jsx)(l.b,{to:"/about",className:"navbar-item",children:"Acerca de"})})]})]})},d=function(){return Object(u.jsx)(u.Fragment,{children:Object(u.jsx)("div",{children:"Bienvenido! Para hacer un costeo, utiliza la barra de navegaci\xf3n para ir al men\xfa apropiado."})})};var b=function(e){var t=e.name,a=e.type,c=e.title,n=e.placeholder,s=e.icon,r=e.errors,i=e.inputRef,o=e.onFocus,l=void 0===o?null:o,j=r[t];return Object(u.jsxs)("div",{className:"field",children:[c&&Object(u.jsx)("label",{className:"label",children:c}),Object(u.jsxs)("div",{className:"control has-icons-left",children:[Object(u.jsx)("input",{ref:i,className:"input",name:t,type:a||"text",placeholder:n||c,onFocus:l}),s&&Object(u.jsx)("span",{className:"icon is-small is-left",children:s})]}),j&&Object(u.jsxs)("p",{className:"help is-danger",children:["Falta agregar ",c.toLowerCase(),"."]})]})};function m(e){var t=e.fields,a=e.register,c=e.handleSubmit,n=e.postMutation,s=e.errors;return Object(u.jsx)("div",{children:Object(u.jsxs)("form",{onSubmit:c(n.mutate),children:[t.map((function(e,t){return Object(u.jsx)(b,{inputRef:a({required:void 0===e.required||e.required}),title:e.title,name:e.name,type:e.type,icon:e.icon,errors:s,onFocus:function(){return n.reset()}},e.name+t)})),Object(u.jsx)("input",{className:"button is-success is-fullwidth",type:"submit",value:"Agregar"}),Object(u.jsxs)(u.Fragment,{children:[n.isLoading?"Agregando...":null,n.isError?"Ocurri\xf3 un error:"+n.error.message:null,n.isSuccess?"\xc9xito al agregar!":null]})]})})}var O=a(6),p=a(8),h=a(26);function x(e){var t=e.title,a=e.tabs,c=e.children,s=e.colorClass,r=e.headerButton;return Object(u.jsx)("div",{children:Object(u.jsxs)("nav",{className:"panel "+(s||"is-primary"),children:[Object(u.jsx)("div",{className:"panel-heading",children:Object(u.jsxs)("nav",{className:"level",children:[Object(u.jsx)("span",{className:"level-left",children:t}),Object(u.jsx)("span",{className:"level-right",children:r&&r})]})}),a&&Object(u.jsx)("p",{className:"panel-tabs",children:a.map((function(e){return Object(u.jsx)("span",{className:e.is_active&&"is-active",children:e.title})}))}),n.a.Children.map(c,(function(e){return Object(u.jsx)("label",{className:"panel-block",children:e},e.key)}))]})})}var f=a(30),v=a(21);function g(){return{money:new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}),toFloat:function(e){return"string"==typeof e?(e=e.replace("$",""),parseFloat(e.replace(",",""))):e}}}var N=function(e){var t=e.row,a=e.deleteData;return e.isInEditMode?Object(u.jsx)(v.b,{className:"has-text-danger",onClick:function(){a(t.original.id)},style:{cursor:"pointer"},size:32}):""},y={Cell:function(e){var t=e.value,a=e.row,c=(a.index,a.original),s=e.column.id,r=e.updateCallback,i=e.money_column,l=e.isInEditMode,j=n.a.useState(t),d=Object(o.a)(j,2),b=d[0],m=d[1],O=n.a.useState(!1),p=Object(o.a)(O,2),h=p[0],x=p[1],f=g(),v=f.money,N=f.toFloat;n.a.useEffect((function(){m(t)}),[t]);var y=s!==i||h?b:v.format(b);return Object(u.jsx)(u.Fragment,{children:l?Object(u.jsx)("input",{className:"input",value:y,onChange:function(e){m(e.target.value)},onBlur:function(){var e=c;e[s]=b,r(e),x(!1)},onFocus:function(e){x(!0),s===i&&m(N(b))},type:s===i&&h?"number":"text"}):Object(u.jsx)("span",{children:y})})}};function w(e){var t=e.title,a=e.cols,s=e.data,r=e.money_column,i=e.showTotal,l=e.update_callback,j=e.deleteData,d=g().money,b=Object(c.useMemo)((function(){var e=0;return r?(s.forEach((function(t){e+=parseFloat(t[r])})),d.format(e||0)):d.format(e)}),[s,d,r]),m=Object(c.useState)(!1),v=Object(o.a)(m,2),w=v[0],F=v[1],S=Object(c.useMemo)((function(){return[].concat(Object(p.a)(a),[{Header:"",accessor:"delete",Cell:N}])}),[a]),_=n.a.useState(!1),R=Object(o.a)(_,2),k=R[0],I=R[1];n.a.useEffect((function(){I(!1)}),[s]);var M=Object(h.useTable)({columns:S,data:s,defaultColumn:y,autoResetPage:!k,updateCallback:function(e){l(e),I(!0)},deleteData:j,money_column:r,isInEditMode:w},h.useGlobalFilter,h.useSortBy),G=M.getTableProps,H=M.getTableBodyProps,B=M.headerGroups,P=M.rows,A=M.prepareRow,D=M.state,E=M.preGlobalFilteredRows,z=M.setGlobalFilter;return Object(u.jsxs)(x,{title:t,colorClass:"is-pink",headerButton:Object(u.jsx)(f.a,{className:w&&"has-text-white",onClick:function(){F(!w)},style:{cursor:"pointer"}}),children:[Object(u.jsx)(C,{preGlobalFilteredRows:E,globalFilter:D.globalFilter,setGlobalFilter:z}),Object(u.jsxs)("table",Object(O.a)(Object(O.a)({className:"table is-fullwidth is-hoverable"},G()),{},{children:[Object(u.jsx)("thead",{children:B.map((function(e){return Object(u.jsx)("tr",Object(O.a)(Object(O.a)({},e.getHeaderGroupProps()),{},{children:e.headers.map((function(e){return Object(u.jsxs)("th",Object(O.a)(Object(O.a)({},e.getHeaderProps(e.getSortByToggleProps())),{},{children:[e.render("Header"),Object(u.jsx)("span",{children:e.isSorted?e.isSortedDesc?" \ud83d\udd3d":" \ud83d\udd3c":""})]}))}))}))}))}),Object(u.jsx)("tbody",Object(O.a)(Object(O.a)({},H()),{},{children:P.map((function(e,t){return A(e),Object(u.jsx)("tr",Object(O.a)(Object(O.a)({},e.getRowProps()),{},{children:e.cells.map((function(e){return Object(u.jsx)("td",Object(O.a)(Object(O.a)({},e.getCellProps()),{},{children:e.render("Cell")}))}))}))}))})),i&&Object(u.jsx)("tfoot",{children:Object(u.jsxs)("tr",{children:[Object(u.jsx)("td",{className:"is-size-5 px-3 has-text-weight-bold",children:"Total"}),Object(u.jsx)("td",{className:"is-size-5 px-3 has-text-weight-bold",children:b})]})})]}))]})}function C(e){var t=e.preGlobalFilteredRows,a=e.globalFilter,c=e.setGlobalFilter,s=t.length,r=n.a.useState(a),i=Object(o.a)(r,2),l=i[0],j=i[1],d=Object(h.useAsyncDebounce)((function(e){c(e||void 0)}),200);return Object(u.jsxs)("p",{className:"control has-icons-left",children:[Object(u.jsx)("input",{className:"input is-fullwidth",type:"search",value:l||"",onChange:function(e){j(e.target.value),d(e.target.value)},placeholder:"Buscar entre ".concat(s," registros..."),style:{border:"0"}}),Object(u.jsx)("span",{className:"icon is-left",children:Object(u.jsx)(f.b,{})})]})}var F=a(38),S=a(33),_=a(31),R=a(94),k=a(95),I=a(54),M=a.n(I).a.create({baseURL:"https://costeosapi.herokuapp.com/"}),G=function(){return M.get("costosfijos").then((function(e){return e.data}))},H=function(e){return M.post("costosfijos",e)},B=function(e){return M.put("costosfijos/".concat(e.id),e)},P=function(e){return M.delete("costosfijos/".concat(e))};function A(){var e=Object(_.b)(),t=Object(F.a)(),a=t.register,s=t.handleSubmit,r=t.errors,i=t.reset,o=Object(R.a)("costos_fijos",G),l=o.isLoading,j=o.error,d=o.data,b=Object(k.a)(H,{onSuccess:function(){e.invalidateQueries("costos_fijos"),i()}}),O=Object(k.a)(B),p=Object(k.a)(P,{onSuccess:function(){e.invalidateQueries("costos_fijos")}}),h=n.a.useMemo((function(){return[{title:"Concepto",name:"concepto",type:"text",icon:Object(u.jsx)(S.a,{})},{title:"Costo mensual",name:"costo_mensual",type:"number",icon:Object(u.jsx)(v.a,{})}]}),[]),x=Object(c.useMemo)((function(){return[{Header:"Concepto",accessor:"concepto"},{Header:"Costo mensual",accessor:"costo_mensual"}]}),[]);return l?"Loading...":j?"An error has occurred: "+j.message:Object(u.jsxs)("div",{className:"columns is-variable is-3",children:[Object(u.jsx)("div",{className:"column",children:Object(u.jsx)("div",{className:"box",children:Object(u.jsx)(m,{fields:h,register:a,handleSubmit:s,postMutation:b,errors:r})})}),Object(u.jsx)("div",{className:"column",children:Object(u.jsx)(w,{title:"Costos Fijos",cols:x,data:d,money_column:"costo_mensual",showTotal:!0,update_callback:O.mutate,deleteData:p.mutate})})]})}var D=a(55),E=a(13);function z(e,t){var a=t.addRow,c=t.editRow,n=t.deleteRow;if(a)return Object(O.a)(Object(O.a)({},e),{},{insumos:[].concat(Object(p.a)(e.insumos),[a])});if(c){var s=c.rowIndex,r=c.columnId,i=c.value;return Object(O.a)(Object(O.a)({},e),{},{insumos:e.insumos.map((function(t,a){return a===s?Object(O.a)(Object(O.a)({},e.insumos[s]),{},Object(E.a)({},r,i)):t}))})}return n?Object(O.a)(Object(O.a)({},e),{},{insumos:e.insumos.filter((function(e,t){return t!==n}))}):void 0}var T=a(56),L=a(34);function U(){var e=Object(D.a)(z),t=e.action,a=e.state.insumos,c=Object(F.a)(),s=c.register,r=c.handleSubmit,i=c.errors,l=c.reset,j=n.a.useMemo((function(){return[{title:"Insumo",name:"insumo",type:"text",icon:Object(u.jsx)(T.a,{})},{title:"Valor de compra",name:"valor_de_compra",type:"number",icon:Object(u.jsx)(v.a,{})},{title:"Cantidad",name:"cantidad",type:"number",icon:Object(u.jsx)(L.b,{})},{title:"Unidad",name:"unidad",type:"text",icon:Object(u.jsx)(L.a,{})},{title:"Merma",name:"merma",type:"number",icon:Object(u.jsx)(S.b,{})}]}),[]),d=n.a.useMemo((function(){return[{Header:"Insumo",accessor:"insumo"},{Header:"Valor de compra",accessor:"valor_de_compra"},{Header:"Cantidad",accessor:"cantidad"},{Header:"Unidad",accessor:"unidad"},{Header:"Merma",accessor:"merma"}]}),[]),b=n.a.useState(!1),O=Object(o.a)(b,2),p=O[0],h=O[1];n.a.useEffect((function(){h(!1)}),[a]);return Object(u.jsxs)("div",{className:"columns is-variable is-3",children:[Object(u.jsx)("div",{className:"column",children:Object(u.jsx)("div",{className:"box",children:Object(u.jsx)(m,{fields:j,register:s,handleSubmit:r,onSubmit:function(e){t({addRow:e}),l()},errors:i})})}),Object(u.jsx)("div",{className:"column",children:Object(u.jsx)(w,{title:"Insumos",cols:d,data:a,money_column:"valor_de_compra",update_callback:function(e,a,c){h(!0),t({editRow:{rowIndex:e,columnId:a,value:c}})},deleteData:function(e){t({deleteRow:e.id})},skipPageReset:p})})]})}var q=a(35),Q=a(36),V=a(39),J=a(37),K=function(e){Object(V.a)(a,e);var t=Object(J.a)(a);function a(){return Object(q.a)(this,a),t.apply(this,arguments)}return Object(Q.a)(a,[{key:"render",value:function(){return Object(u.jsxs)("div",{children:[Object(u.jsx)("h1",{className:"title",children:"Acerca de"}),Object(u.jsx)("p",{children:"App creada por Giovanny Gonz\xe1lez Baltazar usando las ideas de Kora Amaya Vald\xe9z."})]})}}]),a}(c.Component),$=function(e){Object(V.a)(a,e);var t=Object(J.a)(a);function a(){return Object(q.a)(this,a),t.apply(this,arguments)}return Object(Q.a)(a,[{key:"render",value:function(){return Object(u.jsx)("div",{children:Object(u.jsx)("h1",{className:"title",style:{textAlign:"center"},children:"404 La p\xe1gina a la que intentas acceder no existe."})})}}]),a}(c.Component),W=a(57);var X=function(){return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)(j,{}),Object(u.jsx)("div",{className:"container mt-4",children:Object(u.jsxs)(i.c,{children:[Object(u.jsx)(i.a,{exact:!0,path:"/",component:d}),Object(u.jsx)(i.a,{exact:!0,path:"/costos-fijos",component:A}),Object(u.jsx)(i.a,{exact:!0,path:"/insumos",component:U}),Object(u.jsx)(i.a,{exact:!0,path:"/about",component:K}),Object(u.jsx)(i.a,{component:$})]})}),Object(u.jsx)(W.ReactQueryDevtools,{initialIsOpen:!1})]})},Y=(a(90),a(93)),Z=a(58),ee=new Y.a,te=Object(Z.a)({basename:"/costeos_app"});r.a.render(Object(u.jsx)(n.a.StrictMode,{children:Object(u.jsx)(_.a,{client:ee,children:Object(u.jsx)(l.a,{children:Object(u.jsx)(X,{})})})}),document.getElementById("root"))}},[[91,1,2]]]);
//# sourceMappingURL=main.d3193b09.chunk.js.map